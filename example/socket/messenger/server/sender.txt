//  Author: Corey Ferguson
//  Date:   September 21, 2023
//  File:   sender.txt
//

func main
    askBeforeExit = true

    sfd = server(8080, 1)

    echo "Server listening on port 8080...\n"

    array conv = null

    while 1
        while !(conv = accept(sfd))
            continue
        end while
        
        echo "Connected...\n"
        
        listen(first conv, 8081)
        
        while 1
            req = null
            while !(req = input())
                continue
            end while
        
            if send(first conv, req) <= 0
                break
            end if
        end while

        close(first conv)
        
        echo "Disconnected.\n"
    end while
end func

main()
